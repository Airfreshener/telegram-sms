name: Android User Build

on: [push]

jobs:
    build:

        runs-on: ubuntu-latest

        steps:
            -   uses: actions/checkout@v1
            -   name: set up JDK 1.8
                uses: actions/setup-java@v1
                with:
                    java-version: 1.8
            -   name: Set version number
                run: export VERSION_CODE=${GITHUB_ACTION} && export export VERSION_NAME=GITHUB-${GITHUB_SHA}
            -   name: Setting up the system environment
                run: cp ./.github/workflows/github-action-only.jks ./app/keys.jks && export KEYSTORE_PASS=000000000 && export ALIAS_NAME=key0 && export ALIAS_PASS=111111111
            -   name: Build with Gradle
                run: ./gradlew assembleRelease
            -   name: Upload artifact
                uses: actions/upload-artifact@master
                with:
                    name: telegram-sms
                    path: app/build/outputs/apk/release/app-release.apk